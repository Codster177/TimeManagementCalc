<!DOCTYPE html>

<html>

<head>
    <script src="https://cdn.syncfusion.com/ej2/dist/ej2.min.js" type="text/javascript"></script>
    <title>Time Management Calculator</title>
</head>

<body>
    <script>
        
        var freeHours = 86;
        var attendingClass = 4;
        var studying = 2;
        var working = 12;
        var commuting = 45;
        var meals = 7;
        var sleeping = 56;
        var personalHygiene = 0;
        var exercise = 0;
        var studentOrg = 0;
        var hobbies = 0;
        var chores = 0;
        var socializing = 0;

        nums = [freeHours, attendingClass, studying, commuting, meals, sleeping, personalHygiene, exercise, studentOrg, hobbies, chores, socializing];
        names = ['Free Time', 'Class', 'Working', 'Studying', 'Commuting', 'Eating', 'Sleeping', 'Self Care', 'Exercise', 'Clubs', 'Hobbies', 'Chores', 'Socializing' ];
    </script>

    <div id="container"></div>
    <form action="/action_page.php">
    <label for="freeHours">Free Hours</label><br>
    <label for="freeHoursDisplay" id="freeHoursDisplay">168</label><br><br>
    <label for="attendingClass">Hours spent in class:</label><br>
    <input type="text" id="input2" name="attendingClass" value="0"><br><br>
    <label for="studying">Hours spent studying:</label><br>
    <input type="text" id="input3" name="studying" value="0"><br><br>
    <label for="working">Hours spent working:</label><br>
    <input type="text" id="input4" name="working" value="0"><br><br>
    <label for="commuting">Hours spent commuting:</label><br>
    <input type="text" id="input5" name="commuting" value="0"><br><br>
    <label for="meals">Hours spent eating meals:</label><br>
    <input type="text" id="input6" name="eatingMeals" value="0"><br><br>
    <label for="sleeping">Hours spent sleeping:</label><br>
    <input type="text" id="input7" name="sleeping" value="0"><br><br>
    <label for="hygiene">Hours spent for hygiene:</label><br>
    <input type="text" id="input8" name="hygiene" value="0"><br><br>
    <label for="exercise">Hours spent exercising:</label><br>
    <input type="text" id="input9" name="exercise" value="0"><br><br>
    <label for="studentOrg">Hours spent for student organizations:</label><br>
    <input type="text" id="input10" name="studentOrg" value="0"><br><br>
    <label for="hobbies">Hours spent for hobbies:</label><br>
    <input type="text" id="input11" name="hobbies" value="0"><br><br>
    <label for="chores">Hours spent for chores:</label><br>
    <input type="text" id="input12" name="chores" value="0"><br><br>
    <label for="socializing">Hours spent socializing:</label><br>
    <input type="text" id="input13" name="socializing" value="0"><br><br>

    
    </form>
    <script>
        //prevNum = [freeHours, attendingClass, studying, commuting, meals, sleeping, personalHygiene, exercise, studentOrg, hobbies, chores, socializing];

        var pie = new ej.charts.AccumulationChart(
            {
                series: [
                {
                    dataSource: [
                        { 'x': 'Free Time', y: freeHours }, 
                        { 'x': 'Class', y: attendingClass },
                        { 'x': 'Working', y:working},
                        { 'x': 'Studying', y: studying },
                        { 'x': 'Commuting', y: commuting },
                        { 'x': 'Eating', y: meals },
                        { 'x': 'Sleeping', y: sleeping },
                        { 'x': 'Self Care', y: personalHygiene },
                        { 'x': 'Exercise', y: exercise },
                        { 'x': 'Clubs', y: studentOrg },
                        { 'x': 'Hobbies', y: hobbies },
                        { 'x': 'Chores', y: chores },
                        { 'x': 'Socializing', y: socializing },
                    ],
                    dataLabel: {
                        visible: true,
                        position: 'Inside',
                    },
                    xName: 'x',
                    yName: 'y'
                }
                ]
            }
        )
        
        function changes(ar1, ar2) 
        {
            for(let i = 0; i < 12; i++)
            {
                if (ar[i] != ar[i])
                {
                    return true;
                }
            }
            return false;
        }
        
    

        pie.appendTo('#container');
        var test = 0;
        let runTime = () => 
        {

            attendingClass = document.getElementById("input2").value;
            studying = document.getElementById("input3").value;
            working = document.getElementById("input4").value;
            commuting = document.getElementById("input5").value;
            meals = document.getElementById("input6").value;
            sleeping = document.getElementById("input7").value;
            personalHygiene = document.getElementById("input8").value;
            exercise = document.getElementById("input9").value;
            studentOrg = document.getElementById("input10").value;
            hobbies = document.getElementById("input11").value;
            chores = document.getElementById("input12").value;
            socializing = document.getElementById("input13").value;

            newNum = [freeHours, attendingClass, studying, commuting, meals, sleeping, personalHygiene, exercise, studentOrg, hobbies, chores, socializing];

            freeHours = Number(168) - (Number(attendingClass) + Number(studying) + Number(working) + Number(commuting) + Number(meals) + Number(sleeping) + Number(personalHygiene) + Number(exercise) + Number(studentOrg) + Number(hobbies) + Number(chores) + Number(socializing));

            recalculateValues();

            for (let i = 0; i < 12; i++)
            {
                if (newNum[i] > 0)
                {
                    pie.series[0].dataSource = [{'x': name[i], y: newNum[i]}];
                }
            }
            // pie.series[0].dataSource = [
            //             { 'x': 'Free Time', y: freeHours }, 
            //             { 'x': 'Class', y: attendingClass },
            //             { 'x': 'Studying', y: studying },
            //             { 'x': 'Working', y:working},
            //             { 'x': 'Commuting', y: commuting },
            //             { 'x': 'Eating', y: meals },
            //             { 'x': 'Sleeping', y: sleeping },
            //             { 'x': 'Self Care', y: personalHygiene },
            //             { 'x': 'Exercise', y: exercise },
            //             { 'x': 'Clubs', y: studentOrg },
            //             { 'x': 'Hobbies', y: hobbies },
            //             { 'x': 'Chores', y: chores },
            //             { 'x': 'Socializing', y: socializing },
            //         ];


            for (let i = 0; i < 12; i++)
            {
                if ((newNum[i] - num[i]) > 0)
                {
                    pie.refresh();
                }
            }

            function recalculateValues()
            {
                if (studying <= 3 * Number(attendingClass)){
                    studying = 3 * Number(attendingClass);
                }
            }
            
            document.getElementById("freeHoursDisplay").innerHTML = freeHours;

            document.getElementById("input2").value = attendingClass;
            document.getElementById("input3").value = studying;
            document.getElementById("input4").value = working;
            document.getElementById("input5").value = commuting;
            document.getElementById("input6").value = meals;
            document.getElementById("input7").value = sleeping;
            document.getElementById("input8").value = personalHygiene;
            document.getElementById("input9").value = exercise;
            document.getElementById("input10").value = studentOrg;
            document.getElementById("input11").value = hobbies;
            document.getElementById("input12").value = chores;
            document.getElementById("input13").value = socializing;
        }
        
        setInterval(runTime, 100);
    </script>
  </body>

</html>